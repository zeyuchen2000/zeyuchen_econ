-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  D:\Stata\Rep_folder\output_logs\Fig8.log
  log type:  text
 opened on:  20 Feb 2024, 01:05:46

. 
. global cov lngdp lnp max_temp min_temp windpow

. 
. ** JAPCP-covered boundary
. use "Rep_folder\data\Shandong_sample.dta", clear

. drop dudt

. keep if (hnhb==1)|(boundary==0)
(300 observations deleted)

. gen before = (ym<201606)&(boundary==1)

. gen dudt_9 = (ym==201606)&(boundary==1)

. gen dudt_8 = (ym==201607)&(boundary==1)

. gen dudt_7 = (ym==201608)&(boundary==1)

. gen dudt_6 = (ym==201609)&(boundary==1)

. gen dudt_5 = (ym==201610)&(boundary==1)

. gen dudt_4 = (ym==201611)&(boundary==1)

. gen dudt_3 = (ym==201612)&(boundary==1)

. gen dudt_2 = (ym==201701)&(boundary==1)

. gen dudt_1 = (ym==201702)&(boundary==1)

. gen dudt0 = (ym==201703)&(boundary==1)

. gen dudt1 = (ym==201704)&(boundary==1)

. gen dudt2 = (ym==201705)&(boundary==1)

. gen dudt3 = (ym==201706)&(boundary==1)

. gen dudt4 = (ym==201707)&(boundary==1)

. gen dudt5 = (ym==201708)&(boundary==1)

. gen dudt6 = (ym==201709)&(boundary==1)

. gen dudt7 = (ym==201710)&(boundary==1)

. gen dudt8 = (ym==201711)&(boundary==1)

. gen dudt9 = (ym==201712)&(boundary==1)

. gen dudt10 = (ym==201801)&(boundary==1)

. gen dudt11 = (ym==201802)&(boundary==1)

. gen after = (ym>201802)&(boundary==1)

. replace dudt_7 = 0
(8 real changes made)

.                  
. jackknife: reghdfe lnAQI before* dudt* after $cov , absorb(monitor_id ym winddir) cluster(monitor_id)
(running reghdfe on estimation sample)

Jackknife replications (100)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..nn..............................................   100

HDFE Linear regression                            Number of obs   =      4,705
Absorbing 3 HDFE groups                           F(  27,     97) =      46.73
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.9145
                                                  Adj R-squared   =     0.9107
                                                  Within R-sq.    =     0.0821
Number of clusters (monitor_id) =        100      Root MSE        =     0.1092

                            (Replications based on 100 clusters in monitor_id)
------------------------------------------------------------------------------
             |              Jackknife
       lnAQI | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
      before |  -.0368779   .0303777    -1.21   0.228    -.0971693    .0234136
      dudt_9 |  -.0764217   .0280438    -2.73   0.008    -.1320808   -.0207626
      dudt_8 |   .0502095   .0309465     1.62   0.108    -.0112107    .1116297
      dudt_7 |          0  (omitted)
      dudt_6 |  -.0266381   .0232594    -1.15   0.255    -.0728017    .0195254
      dudt_5 |  -.0318504   .0385779    -0.83   0.411    -.1084167     .044716
      dudt_4 |   .0003803   .0357741     0.01   0.992    -.0706214    .0713819
      dudt_3 |   .0836384   .0457215     1.83   0.070    -.0071062    .1743829
      dudt_2 |  -.0722284   .0361768    -2.00   0.049    -.1440294   -.0004275
      dudt_1 |  -.0324657   .0348858    -0.93   0.354    -.1017043    .0367729
       dudt0 |  -.1377715   .0367258    -3.75   0.000    -.2106621   -.0648809
       dudt1 |  -.1722763   .0253982    -6.78   0.000    -.2226847   -.1218679
       dudt2 |  -.0173983   .0314973    -0.55   0.582    -.0799118    .0451152
       dudt3 |  -.0689883   .0450364    -1.53   0.129    -.1583731    .0203966
       dudt4 |  -.1664753   .0577683    -2.88   0.005    -.2811293   -.0518213
       dudt5 |  -.1322358   .0508429    -2.60   0.011    -.2331449   -.0313267
       dudt6 |   -.160897   .0389463    -4.13   0.000    -.2381947   -.0835992
       dudt7 |  -.0876826    .044134    -1.99   0.050    -.1752764   -.0000888
       dudt8 |  -.1000335   .0637605    -1.57   0.120    -.2265804    .0265133
       dudt9 |   -.091619   .0533972    -1.72   0.089    -.1975977    .0143597
      dudt10 |  -.1521232   .0597296    -2.55   0.012    -.2706701   -.0335764
      dudt11 |  -.0150123   .0476776    -0.31   0.754    -.1096392    .0796146
       after |  -.1367987   .0386196    -3.54   0.001    -.2134479   -.0601494
       lngdp |   .0744363    .033628     2.21   0.029      .007694    .1411787
         lnp |  -.2994252   .0844738    -3.54   0.001    -.4670822   -.1317681
    max_temp |   .0175522    .004214     4.17   0.000     .0091885    .0259159
    min_temp |  -.0241852   .0038737    -6.24   0.000    -.0318735   -.0164969
     windpow |  -.0518818   .0073354    -7.07   0.000    -.0664406   -.0373231
       _cons |   5.249311   .4186662    12.54   0.000     4.418375    6.080248
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  monitor_id |       100         100           0    *|
          ym |        60           0          60     |
     winddir |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. est store hnhb_dynamic_effect

. 
. ** JAPCP-uncovered boundary
. use "Rep_folder\data\Shandong_sample.dta", clear

. drop dudt

. keep if (js==1)|(boundary==0)
(517 observations deleted)

. gen before = (ym<201606)&(boundary==1)

. gen dudt_9 = (ym==201606)&(boundary==1)

. gen dudt_8 = (ym==201607)&(boundary==1)

. gen dudt_7 = (ym==201608)&(boundary==1)

. gen dudt_6 = (ym==201609)&(boundary==1)

. gen dudt_5 = (ym==201610)&(boundary==1)

. gen dudt_4 = (ym==201611)&(boundary==1)

. gen dudt_3 = (ym==201612)&(boundary==1)

. gen dudt_2 = (ym==201701)&(boundary==1)

. gen dudt_1 = (ym==201702)&(boundary==1)

. gen dudt0 = (ym==201703)&(boundary==1)

. gen dudt1 = (ym==201704)&(boundary==1)

. gen dudt2 = (ym==201705)&(boundary==1)

. gen dudt3 = (ym==201706)&(boundary==1)

. gen dudt4 = (ym==201707)&(boundary==1)

. gen dudt5 = (ym==201708)&(boundary==1)

. gen dudt6 = (ym==201709)&(boundary==1)

. gen dudt7 = (ym==201710)&(boundary==1)

. gen dudt8 = (ym==201711)&(boundary==1)

. gen dudt9 = (ym==201712)&(boundary==1)

. gen dudt10 = (ym==201801)&(boundary==1)

. gen dudt11 = (ym==201802)&(boundary==1)

. gen after = (ym>201802)&(boundary==1)

. replace dudt_7 = 0
(5 real changes made)

.                  
. jackknife: reghdfe lnAQI before* dudt* after $cov , absorb(monitor_id ym winddir) cluster(monitor_id)
(running reghdfe on estimation sample)

Jackknife replications (93)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
.nn........................................

HDFE Linear regression                            Number of obs   =      4,505
Absorbing 3 HDFE groups                           F(  27,     90) =      35.84
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.9116
                                                  Adj R-squared   =     0.9077
                                                  Within R-sq.    =     0.0778
Number of clusters (monitor_id) =         93      Root MSE        =     0.1096

                             (Replications based on 93 clusters in monitor_id)
------------------------------------------------------------------------------
             |              Jackknife
       lnAQI | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
      before |   .1073096   .0716124     1.50   0.138     -.034961    .2495802
      dudt_9 |   .0888847   .0560569     1.59   0.116     -.022482    .2002514
      dudt_8 |   .0135772   .0623402     0.22   0.828    -.1102725    .1374269
      dudt_7 |          0  (omitted)
      dudt_6 |    .048064    .059307     0.81   0.420    -.0697597    .1658877
      dudt_5 |  -.0632866   .0652411    -0.97   0.335    -.1928995    .0663262
      dudt_4 |  -.0080795   .0582161    -0.14   0.890    -.1237359    .1075769
      dudt_3 |   .0973219   .0729612     1.33   0.186    -.0476282    .2422719
      dudt_2 |   .0334484   .0769737     0.43   0.665    -.1194733    .1863701
      dudt_1 |   .1084965   .0871431     1.25   0.216    -.0646286    .2816215
       dudt0 |   .0397619   .0804042     0.49   0.622    -.1199751    .1994989
       dudt1 |   .0307621   .0671793     0.46   0.648    -.1027013    .1642255
       dudt2 |   .0874054   .0568438     1.54   0.128    -.0255246    .2003355
       dudt3 |   .0390325   .0404652     0.96   0.337    -.0413586    .1194236
       dudt4 |  -.1007776   .0442169    -2.28   0.025    -.1886222   -.0129329
       dudt5 |   .0393705   .0366238     1.07   0.285    -.0333891    .1121301
       dudt6 |  -.0387563   .0463561    -0.84   0.405    -.1308508    .0533382
       dudt7 |   .1198434   .0722307     1.66   0.101    -.0236556    .2633423
       dudt8 |   .2121311   .0647007     3.28   0.001     .0835919    .3406702
       dudt9 |   .1911318   .0828518     2.31   0.023     .0265321    .3557314
      dudt10 |   .2371572    .085544     2.77   0.007      .067209    .4071053
      dudt11 |   .1614224   .0821342     1.97   0.052    -.0017515    .3245962
       after |   .0906712   .0730531     1.24   0.218    -.0544615    .2358039
       lngdp |   .0820739   .0332556     2.47   0.015     .0160059    .1481418
         lnp |  -.4076518   .1435143    -2.84   0.006     -.692768   -.1225356
    max_temp |    .018491   .0042576     4.34   0.000     .0100326    .0269493
    min_temp |  -.0237006   .0039118    -6.06   0.000    -.0314721   -.0159292
     windpow |  -.0528198   .0075261    -7.02   0.000    -.0677717   -.0378678
       _cons |   5.597183   .6409181     8.73   0.000     4.323887    6.870478
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
  monitor_id |        93          93           0    *|
          ym |        60           0          60     |
     winddir |        12           1          11     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. est store js_dynamic_effect

. 
. coefplot (hnhb_dynamic_effect, keep(dudt*) drop(dudt_9 dudt_8) omit) ///
>                  (js_dynamic_effect, keep(dudt*) drop(dudt_9 dudt_8) omit), ///
>                  yline(0) xline(7.5, lpattern(dash)) xline(14.5, lpattern(dash)) vertical ciopts(recast(rcap)) ///
>                  xtitle("Months") ytitle("Coefficient") ci(95) ///
>                  coeflabels(dudt_7=`""Aug" "2016""' dudt_6=`""Sep" """' dudt_5=`""Oct" """' dudt_4=`""Nov" """' ///
>                                         dudt_3=`""Dec" """' dudt_2=`""Jan" "2017""' dudt_1=`""Feb" """' dudt0=`""Mar" """' ///
>                                         dudt1=`""Apr" """' dudt2=`""May" """' dudt3=`""Jun" """' dudt4=`""Jul" """' ///
>                                         dudt5=`""Aug" """' dudt6=`""Sep" """' dudt7=`""Oct" """' dudt8=`""Nov" """' ///
>                                         dudt9=`""Dec" """' dudt10=`""Jan" "2018""' dudt11=`""Feb" """') ///
>                  legend(row(1) label(2 "JAPCP-covered provincial boundary") label(4 "JAPCP-uncovered provincial boundary") ///
>                                 size(medsmall)) ///
>                  text(0.43 9.3 "First stage of JAPCP", size(small)) text(0.43 16.5 "Second stage of JAPCP", size(small))

. 
. graph export "Rep_folder\output_figures\Fig8.pdf", replace
file Rep_folder\output_figures\Fig8.pdf saved as PDF format

. 
. log close
      name:  <unnamed>
       log:  D:\Stata\Rep_folder\output_logs\Fig8.log
  log type:  text
 closed on:  20 Feb 2024, 01:06:16
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
